# éƒ¨ç½²ä¸è¿è¡Œ

<cite>
**æœ¬æ–‡æ¡£å¼•ç”¨æ–‡ä»¶**  
- [start_app.bat](file://scripts/start_app.bat)
- [start_app.sh](file://scripts/start_app.sh)
- [project_status.py](file://src/project_status.py)
- [requirements.txt](file://config/requirements.txt)
- [main.py](file://src/main.py)
- [auth.py](file://src/auth.py)
</cite>

## ç›®å½•
1. [ç®€ä»‹](#ç®€ä»‹)
2. [ç¯å¢ƒå‡†å¤‡](#ç¯å¢ƒå‡†å¤‡)
3. [å¯åŠ¨åº”ç”¨](#å¯åŠ¨åº”ç”¨)
4. [é¡¹ç›®çŠ¶æ€æ£€æŸ¥å·¥å…·](#é¡¹ç›®çŠ¶æ€æ£€æŸ¥å·¥å…·)
5. [DockeråŒ–éƒ¨ç½²å»ºè®®](#dockeråŒ–éƒ¨ç½²å»ºè®®)
6. [ç”Ÿäº§ç¯å¢ƒé…ç½®](#ç”Ÿäº§ç¯å¢ƒé…ç½®)
7. [æ•…éšœæ’é™¤æŒ‡å—](#æ•…éšœæ’é™¤æŒ‡å—)
8. [ç›‘æ§ä¸ç»´æŠ¤å»ºè®®](#ç›‘æ§ä¸ç»´æŠ¤å»ºè®®)
9. [å®Œæ•´æ“ä½œæµç¨‹](#å®Œæ•´æ“ä½œæµç¨‹)

## ç®€ä»‹
æœ¬æ–‡æ¡£æä¾›æ— äººé©¾é©¶æ•°æ®ç®¡ç†å¹³å°çš„è¯¦ç»†éƒ¨ç½²ä¸è¿è¡ŒæŒ‡å—ã€‚æ¶µç›–ä»ç¯å¢ƒé…ç½®åˆ°ç³»ç»Ÿç»´æŠ¤çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ŒåŒ…æ‹¬è„šæœ¬å¯åŠ¨ã€çŠ¶æ€æ£€æŸ¥ã€å®¹å™¨åŒ–éƒ¨ç½²å’Œç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µã€‚

## ç¯å¢ƒå‡†å¤‡

### Pythonç¯å¢ƒè¦æ±‚
- Pythonç‰ˆæœ¬ï¼š3.9åŠä»¥ä¸Š
- åŒ…ç®¡ç†å·¥å…·ï¼špip
- è™šæ‹Ÿç¯å¢ƒå»ºè®®ï¼šä½¿ç”¨venvæˆ–condaåˆ›å»ºéš”ç¦»ç¯å¢ƒ

### ä¾èµ–å®‰è£…æ­¥éª¤
1. å…‹éš†é¡¹ç›®ä»“åº“
2. è¿›å…¥é¡¹ç›®æ ¹ç›®å½•
3. å®‰è£…ä¾èµ–åŒ…

```bash
pip install -r config/requirements.txt
```

**å…³é”®ä¾èµ–è¯´æ˜**ï¼š
- `streamlit==1.29.0`ï¼šWebåº”ç”¨æ¡†æ¶
- `open3d==0.18.0`ï¼šç‚¹äº‘å¤„ç†æ ¸å¿ƒåº“
- `numpy==1.24.0`ï¼šæ•°å€¼è®¡ç®—åŸºç¡€
- `sqlite3`ï¼šå†…ç½®æ•°æ®åº“æ”¯æŒ

**Section sources**
- [requirements.txt](file://config/requirements.txt#L1-L12)

## å¯åŠ¨åº”ç”¨

### Windowsç³»ç»Ÿå¯åŠ¨
ä½¿ç”¨`start_app.bat`æ‰¹å¤„ç†è„šæœ¬å¯åŠ¨ï¼š

```bat
@echo off
REM ç‚¹äº‘å¯è§†åŒ–å¹³å°å¯åŠ¨è„šæœ¬ (Windows)

echo ğŸš€ å¯åŠ¨æ— äººé©¾é©¶æ•°æ®ç®¡ç†å¹³å°
echo ==============================

REM æ£€æŸ¥Pythonç‰ˆæœ¬
python --version

REM å®‰è£…ä¾èµ–åŒ…
pip install -r requirements.txt

REM åˆ›å»ºæµ‹è¯•æ•°æ®
python test_pointcloud.py

REM å¯åŠ¨Streamlitåº”ç”¨
streamlit run main.py
```

### Linux/macOSç³»ç»Ÿå¯åŠ¨
ä½¿ç”¨`start_app.sh` shellè„šæœ¬å¯åŠ¨ï¼š

```bash
#!/bin/bash
# ç‚¹äº‘å¯è§†åŒ–å¹³å°å¯åŠ¨è„šæœ¬

echo "ğŸš€ å¯åŠ¨æ— äººé©¾é©¶æ•°æ®ç®¡ç†å¹³å°"
echo "=============================="

# æ£€æŸ¥Pythonç‰ˆæœ¬
python --version

# å®‰è£…ä¾èµ–åŒ…
pip install -r requirements.txt

# åˆ›å»ºæµ‹è¯•æ•°æ®
python test_pointcloud.py

# å¯åŠ¨Streamlitåº”ç”¨
streamlit run main.py
```

### å¯åŠ¨æµç¨‹è¯´æ˜
1. æ£€æŸ¥Pythonç¯å¢ƒ
2. å®‰è£…æ‰€éœ€ä¾èµ–åŒ…
3. ç”Ÿæˆæµ‹è¯•ç”¨ç‚¹äº‘æ•°æ®
4. å¯åŠ¨Streamlit WebæœåŠ¡
5. è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨è®¿é—®`http://localhost:8501`

**é»˜è®¤ç™»å½•è´¦æˆ·**ï¼š
- ç”¨æˆ·åï¼šadmin
- å¯†ç ï¼šadmin123

**Section sources**
- [start_app.bat](file://scripts/start_app.bat#L1-L26)
- [start_app.sh](file://scripts/start_app.sh#L1-L24)

## é¡¹ç›®çŠ¶æ€æ£€æŸ¥å·¥å…·

### project_status.pyåŠŸèƒ½
`project_status.py`æ˜¯ä¸€ä¸ªç»¼åˆæ€§çš„é¡¹ç›®çŠ¶æ€æ£€æŸ¥å·¥å…·ï¼Œç”¨äºéªŒè¯ç³»ç»Ÿå®Œæ•´æ€§å’ŒåŠŸèƒ½å¯ç”¨æ€§ã€‚

```python
def check_project_status():
    """æ£€æŸ¥é¡¹ç›®çŠ¶æ€"""
    print("ğŸš— æ— äººé©¾é©¶æ•°æ®ç®¡ç†å¹³å° - åŠŸèƒ½éªŒè¯æ€»ç»“")
    
    # æ–‡ä»¶å­˜åœ¨æ€§æ£€æŸ¥
    required_files = [
        ("main.py", "ä¸»åº”ç”¨ç¨‹åº"),
        ("auth.py", "ç”¨æˆ·è®¤è¯æ¨¡å—"),
        ("data.db", "SQLiteæ•°æ®åº“")
    ]
    
    # æ•°æ®åº“æ£€æŸ¥
    try:
        import sqlite3
        conn = sqlite3.connect('data.db')
        # æ£€æŸ¥è¡¨ç»“æ„
        c.execute("SELECT name FROM sqlite_master WHERE type='table'")
        tables = [t[0] for t in c.fetchall()]
    except Exception as e:
        print(f"âŒ æ•°æ®åº“æ£€æŸ¥å¤±è´¥: {e}")
    
    # ä¾èµ–æ£€æŸ¥
    dependencies = [
        ("streamlit", "Webæ¡†æ¶", False),
        ("open3d", "ç‚¹äº‘å¤„ç†", False)
    ]
    
    # åŠŸèƒ½éªŒè¯
    print("\nğŸ¯ åŠŸèƒ½éªŒè¯:")
    # è®¤è¯åŠŸèƒ½æµ‹è¯•
    # ç‚¹äº‘åŠŸèƒ½æµ‹è¯•
```

### æ£€æŸ¥é¡¹ç›®
- **æ–‡ä»¶å®Œæ•´æ€§**ï¼šéªŒè¯å…³é”®æ–‡ä»¶æ˜¯å¦å­˜åœ¨
- **æ•°æ®åº“çŠ¶æ€**ï¼šæ£€æŸ¥usersã€datasetsç­‰è¡¨ç»“æ„
- **ä¾èµ–é¡¹**ï¼šç¡®è®¤å¿…éœ€å’Œå¯é€‰åº“çš„å®‰è£…çŠ¶æ€
- **åŠŸèƒ½éªŒè¯**ï¼šæµ‹è¯•è®¤è¯å’Œç‚¹äº‘å¤„ç†åŠŸèƒ½
- **æ€»ç»“æŠ¥å‘Š**ï¼šç”Ÿæˆè¯¦ç»†çš„ç³»ç»ŸçŠ¶æ€æ‘˜è¦

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
python src/project_status.py
```

**Section sources**
- [project_status.py](file://src/project_status.py#L1-L147)

## DockeråŒ–éƒ¨ç½²å»ºè®®

### Dockerfileå»ºè®®æ–¹æ¡ˆ
```dockerfile
FROM python:3.9-slim

WORKDIR /app

COPY . .

RUN pip install --no-cache-dir -r config/requirements.txt

EXPOSE 8501

CMD ["streamlit", "run", "src/main.py", "--server.port=8501", "--server.address=0.0.0.0"]
```

### docker-compose.yml
```yaml
version: '3.8'
services:
  platform:
    build: .
    ports:
      - "8501:8501"
    volumes:
      - ./data:/app/data
      - ./datasets:/app/datasets
    environment:
      - STREAMLIT_SERVER_PORT=8501
      - STREAMLIT_SERVER_HEADLESS=true
    restart: unless-stopped
```

### éƒ¨ç½²ä¼˜åŠ¿
- **ç¯å¢ƒä¸€è‡´æ€§**ï¼šç¡®ä¿å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒä¸€è‡´
- **å¿«é€Ÿéƒ¨ç½²**ï¼šä¸€é”®å¯åŠ¨å®Œæ•´åº”ç”¨ç¯å¢ƒ
- **èµ„æºéš”ç¦»**ï¼šé¿å…ä¾èµ–å†²çª
- **å¯æ‰©å±•æ€§**ï¼šä¾¿äºé›†ç¾¤éƒ¨ç½²å’Œè´Ÿè½½å‡è¡¡

**Section sources**
- [requirements.txt](file://config/requirements.txt#L1-L12)
- [main.py](file://src/main.py#L1-L799)

## ç”Ÿäº§ç¯å¢ƒé…ç½®

### ä¼šè¯å®‰å…¨é…ç½®
- **ä¼šè¯è¶…æ—¶**ï¼š24å°æ—¶è‡ªåŠ¨å¤±æ•ˆ
- **å¯†ç ç­–ç•¥**ï¼š
  - æœ€å°é•¿åº¦ï¼š6ä½
  - å¿…é¡»åŒ…å«å­—æ¯å’Œæ•°å­—
  - ä½¿ç”¨PBKDF2-HMAC-SHA256å“ˆå¸Œ
- **è´¦æˆ·é”å®š**ï¼š5æ¬¡å¤±è´¥ç™»å½•åé”å®š1å°æ—¶
- **CSRFä¿æŠ¤**ï¼šåŸºäºéšæœºtokençš„ä¼šè¯æœºåˆ¶

### æ•°æ®åº“å¤‡ä»½ç­–ç•¥
- **å¤‡ä»½é¢‘ç‡**ï¼šæ¯æ—¥å‡Œæ™¨2ç‚¹è‡ªåŠ¨å¤‡ä»½
- **å¤‡ä»½ä½ç½®**ï¼šæœ¬åœ°+äº‘å­˜å‚¨åŒé‡å¤‡ä»½
- **ä¿ç•™å‘¨æœŸ**ï¼šæœ€è¿‘7å¤©å®Œæ•´å¤‡ä»½
- **å¤‡ä»½è„šæœ¬ç¤ºä¾‹**ï¼š
```bash
#!/bin/bash
TIMESTAMP=$(date +"%Y%m%d_%H%M%S")
cp data.db backups/data_${TIMESTAMP}.db
# ä¸Šä¼ åˆ°äº‘å­˜å‚¨...
```

### æ—¥å¿—ç®¡ç†
- **æ—¥å¿—çº§åˆ«**ï¼šINFOåŠä»¥ä¸Š
- **æ—¥å¿—ä½ç½®**ï¼šlogs/app.log
- **è½®è½¬ç­–ç•¥**ï¼šæ¯æ—¥è½®è½¬ï¼Œä¿ç•™30å¤©
- **å…³é”®æ—¥å¿—äº‹ä»¶**ï¼š
  - ç”¨æˆ·ç™»å½•/ç™»å‡º
  - æ•°æ®ä¸Šä¼ /åˆ é™¤
  - ç³»ç»Ÿé”™è¯¯
  - å®‰å…¨äº‹ä»¶

**Section sources**
- [auth.py](file://src/auth.py#L1-L561)
- [main.py](file://src/main.py#L1-L799)

## æ•…éšœæ’é™¤æŒ‡å—

### å¸¸è§å¯åŠ¨é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

#### ç«¯å£å ç”¨é—®é¢˜
**ç—‡çŠ¶**ï¼š`OSError: [Errno 98] Address already in use`
**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æŸ¥æ‰¾å ç”¨8501ç«¯å£çš„è¿›ç¨‹
lsof -i :8501  # macOS/Linux
netstat -ano | findstr :8501  # Windows

# ç»ˆæ­¢è¿›ç¨‹
kill -9 <PID>  # macOS/Linux
taskkill /PID <PID> /F  # Windows

# æˆ–æ›´æ”¹ç«¯å£
streamlit run main.py --server.port=8502
```

#### ä¾èµ–ç¼ºå¤±é—®é¢˜
**ç—‡çŠ¶**ï¼š`ModuleNotFoundError: No module named 'xxx'`
**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# ç¡®ä¿åœ¨æ­£ç¡®ç›®å½•
cd 

# é‡æ–°å®‰è£…ä¾èµ–
pip install -r config/requirements.txt

# å•ç‹¬å®‰è£…å…³é”®ä¾èµ–
pip install streamlit open3d numpy
```

#### æ•°æ®åº“è¿æ¥é—®é¢˜
**ç—‡çŠ¶**ï¼š`sqlite3.OperationalError: unable to open database file`
**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
# æ£€æŸ¥æ•°æ®åº“æ–‡ä»¶æƒé™
import os
if not os.access('data.db', os.W_OK):
    # åˆ›å»ºæ•°æ®åº“
    open('data.db', 'a').close()
```

#### ç‚¹äº‘åº“é—®é¢˜
**ç—‡çŠ¶**ï¼šOpen3Dç›¸å…³é”™è¯¯
**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# é‡æ–°å®‰è£…open3d
pip uninstall open3d
pip install open3d==0.18.0

# æ£€æŸ¥CUDAç‰ˆæœ¬å…¼å®¹æ€§
nvidia-smi
```

**Section sources**
- [start_app.bat](file://scripts/start_app.bat#L1-L26)
- [start_app.sh](file://scripts/start_app.sh#L1-L24)
- [project_status.py](file://src/project_status.py#L1-L147)

## ç›‘æ§ä¸ç»´æŠ¤å»ºè®®

### æ€§èƒ½æŒ‡æ ‡æ”¶é›†
- **CPUä½¿ç”¨ç‡**ï¼šç›‘æ§Pythonè¿›ç¨‹
- **å†…å­˜ä½¿ç”¨**ï¼šå…³æ³¨ç‚¹äº‘åŠ è½½æ—¶çš„å³°å€¼
- **ç£ç›˜I/O**ï¼šæ•°æ®åº“è¯»å†™æ€§èƒ½
- **ç½‘ç»œæµé‡**ï¼šWebè¯·æ±‚å“åº”

### å®šæœŸå¥åº·æ£€æŸ¥
```python
def health_check():
    """ç³»ç»Ÿå¥åº·æ£€æŸ¥"""
    checks = {
        "database": check_database(),
        "storage": check_storage_space(),
        "dependencies": check_dependencies(),
        "web_service": check_web_service()
    }
    return all(checks.values())
```

### ç»´æŠ¤ä»»åŠ¡
- **æ¯å‘¨**ï¼šæ£€æŸ¥ç£ç›˜ç©ºé—´ï¼Œæ¸…ç†ä¸´æ—¶æ–‡ä»¶
- **æ¯æœˆ**ï¼šæ›´æ–°ä¾èµ–åŒ…ï¼Œå®‰å…¨è¡¥ä¸
- **æ¯å­£åº¦**ï¼šæ€§èƒ½ä¼˜åŒ–ï¼Œæ¶æ„è¯„ä¼°
- **å®æ—¶**ï¼šç›‘æ§å¼‚å¸¸ç™»å½•å°è¯•

### ç›‘æ§å·¥å…·å»ºè®®
- **Prometheus + Grafana**ï¼šæŒ‡æ ‡æ”¶é›†ä¸å¯è§†åŒ–
- **ELK Stack**ï¼šæ—¥å¿—åˆ†æ
- **Sentry**ï¼šé”™è¯¯è·Ÿè¸ª
- **è‡ªå®šä¹‰è„šæœ¬**ï¼šå®šæ—¶æ‰§è¡Œ`project_status.py`

**Section sources**
- [project_status.py](file://src/project_status.py#L1-L147)
- [main.py](file://src/main.py#L1-L799)

## å®Œæ•´æ“ä½œæµç¨‹

### ä»å…‹éš†åˆ°è®¿é—®çš„å®Œæ•´æ­¥éª¤
1. **å…‹éš†ä»“åº“**
```bash
git clone <repository-url>
cd platform
```

2. **åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ**
```bash
python -m venv venv
source venv/bin/activate  # Linux/macOS
venv\Scripts\activate     # Windows
```

3. **å®‰è£…ä¾èµ–**
```bash
pip install -r config/requirements.txt
```

4. **éªŒè¯é¡¹ç›®çŠ¶æ€**
```bash
python src/project_status.py
```

5. **å¯åŠ¨åº”ç”¨**
```bash
# Windows
scripts\start_app.bat

# Linux/macOS
chmod +x scripts/start_app.sh
scripts/start_app.sh
```

6. **è®¿é—®Webç•Œé¢**
- æ‰“å¼€æµè§ˆå™¨
- è®¿é—® `http://localhost:8501`
- ä½¿ç”¨admin/admin123ç™»å½•

7. **é¦–æ¬¡é…ç½®**
- ä¿®æ”¹é»˜è®¤ç®¡ç†å‘˜å¯†ç 
- é…ç½®æ•°æ®å­˜å‚¨è·¯å¾„
- è®¾ç½®å¤‡ä»½ç­–ç•¥

**æˆåŠŸæ ‡å¿—**ï¼š
- æµè§ˆå™¨æ­£å¸¸æ˜¾ç¤º"æ— äººé©¾é©¶æ•°æ®ç®¡ç†å¹³å°"
- èƒ½å¤ŸæˆåŠŸç™»å½•
- çŠ¶æ€æ£€æŸ¥å·¥å…·æ˜¾ç¤ºæ‰€æœ‰åŠŸèƒ½æ­£å¸¸

**Section sources**
- [start_app.bat](file://scripts/start_app.bat#L1-L26)
- [start_app.sh](file://scripts/start_app.sh#L1-L24)
- [project_status.py](file://src/project_status.py#L1-L147)
- [main.py](file://src/main.py#L1-L799)