<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸš— æ— äººé©¾é©¶æ•°æ®ç®¡ç†å¹³å° - è®¿é—®å…¥å£</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        
        .access-section {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            backdrop-filter: blur(10px);
        }
        
        .access-link {
            display: block;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            text-decoration: none;
            padding: 15px 20px;
            margin: 10px 0;
            border-radius: 5px;
            transition: all 0.3s ease;
            font-size: 1.1em;
        }
        
        .access-link:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .status {
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
        }
        
        .instructions {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
        }
        
        .emoji {
            font-size: 1.5em;
            margin-right: 10px;
        }
    </style>
    <script>
        function checkServerStatus() {
            const localUrl = 'http://127.0.0.1:8501';
            const networkUrl = 'http://172.16.70.232:8501';

            // æ£€æŸ¥æœ¬åœ°æœåŠ¡å™¨çŠ¶æ€
            fetch(localUrl)
                .then(response => {
                    if (response.ok) {
                        document.getElementById('status').innerHTML =
                            '<span class="emoji">âœ…</span>æœåŠ¡å™¨è¿è¡Œæ­£å¸¸ï¼ˆç«¯å£ 8501ï¼‰';
                        document.getElementById('status').style.background =
                            'rgba(76, 175, 80, 0.3)';
                    }
                })
                .catch(() => {
                    // å°è¯• 8502 ç«¯å£
                    const altLocalUrl = 'http://127.0.0.1:8502';
                    fetch(altLocalUrl)
                        .then(response => {
                            if (response.ok) {
                                document.getElementById('status').innerHTML =
                                    '<span class="emoji">âš ï¸</span>æœåŠ¡å™¨è¿è¡Œåœ¨ç«¯å£ 8502ï¼ˆç«¯å£å†²çªï¼‰';
                                document.getElementById('status').style.background =
                                    'rgba(255, 193, 7, 0.3)';
                                updateLinksToPort8502();
                            }
                        })
                        .catch(() => {
                            document.getElementById('status').innerHTML =
                                '<span class="emoji">âŒ</span>æœåŠ¡å™¨æœªå¯åŠ¨ï¼Œè¯·å…ˆè¿è¡Œ start_central_server.bat';
                            document.getElementById('status').style.background =
                                'rgba(244, 67, 54, 0.3)';
                        });
                });
        }

        function updateLinksToPort8502() {
            const links = document.querySelectorAll('.access-link');
            links.forEach(link => {
                const href = link.getAttribute('href');
                if (href && href.includes(':8501')) {
                    link.setAttribute('href', href.replace(':8501', ':8502'));
                    link.innerHTML = link.innerHTML.replace(':8501', ':8502');
                }
            });
        }

        // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€
        window.onload = function() {
            checkServerStatus();
            // æ¯30ç§’æ£€æŸ¥ä¸€æ¬¡
            setInterval(checkServerStatus, 30000);
        };
    </script>
</head>

<body>
    <h1>ğŸš— æ— äººé©¾é©¶æ•°æ®ç®¡ç†å¹³å°</h1>

    <div id="status" class="status">
        <span class="emoji">ğŸ”„</span>æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€ä¸­...
    </div>

    <div class="access-section">
        <h2><span class="emoji">ğŸ </span>æœ¬åœ°è®¿é—®ï¼ˆä»…æœ¬æœºï¼‰</h2>
        <p>å¦‚æœæ‚¨æ˜¯åœ¨è¿è¡ŒæœåŠ¡å™¨çš„ç”µè„‘ä¸Šè®¿é—®ï¼š</p>
        <a href="http://127.0.0.1:8501" class="access-link" target="_blank">
            <span class="emoji">ğŸ–¥ï¸</span>http://127.0.0.1:8501
        </a>
        <a href="http://localhost:8501" class="access-link" target="_blank">
            <span class="emoji">ğŸŒ</span>http://localhost:8501
        </a>
    </div>

    <div class="access-section">
        <h2><span class="emoji">ğŸŒ</span>ç½‘ç»œè®¿é—®ï¼ˆå…¶ä»–è®¾å¤‡ï¼‰</h2>
        <p>å¦‚æœæ‚¨æ˜¯ä»å…¶ä»–ç”µè„‘æˆ–æ‰‹æœºè®¿é—®ï¼š</p>
        <a href="http://172.16.70.232:8501" class="access-link" target="_blank">
            <span class="emoji">ğŸ“¡</span>http://172.16.70.232:8501
        </a>
    </div>

    <div class="instructions">
        <h3><span class="emoji">ğŸ“‹</span>ä½¿ç”¨è¯´æ˜</h3>
        <ul>
            <li><strong>å¯åŠ¨æœåŠ¡å™¨</strong>ï¼šåŒå‡» <code>start_central_server.bat</code></li>
            <li><strong>è¶…çº§ç®¡ç†å‘˜ç™»å½•</strong>ï¼šç”¨æˆ·å <code>TongYuze</code>ï¼Œå¯†ç  <code>20050812</code></li>
            <li><strong>æ•°æ®å­˜å‚¨</strong>ï¼šæ‰€æœ‰ç”¨æˆ·æ•°æ®è‡ªåŠ¨ä¿å­˜åˆ°æœåŠ¡å™¨ç”µè„‘</li>
            <li><strong>æƒé™æ§åˆ¶</strong>ï¼šåªæœ‰è¶…çº§ç®¡ç†å‘˜å¯ä»¥æŸ¥çœ‹æ‰€æœ‰æ•°æ®</li>
            <li><strong>ç½‘ç»œå…±äº«</strong>ï¼šå…¶ä»–äººå¯ä»¥é€šè¿‡ç½‘ç»œåœ°å€è®¿é—®å’Œä¸Šä¼ æ•°æ®</li>
        </ul>

        <h3><span class="emoji">ğŸ”§</span>æ•…éšœæ’é™¤</h3>
        <ul>
            <li>å¦‚æœæ— æ³•è®¿é—®ï¼Œè¯·æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦åœ¨è¿è¡Œ</li>
            <li>ç¡®ä¿é˜²ç«å¢™å…è®¸8501ç«¯å£é€šä¿¡</li>
            <li>ç½‘ç»œè®¿é—®éœ€è¦åœ¨åŒä¸€ç½‘ç»œç¯å¢ƒä¸‹</li>
            <li>å¦‚æœIPåœ°å€å˜åŒ–ï¼Œè¯·é‡æ–°è¿è¡Œ <code>scripts/get_server_info.py</code></li>
        </ul>
    </div>
</body>

</html>